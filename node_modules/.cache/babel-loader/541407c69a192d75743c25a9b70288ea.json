{"ast":null,"code":"import _regeneratorRuntime from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/friends/Friend.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  padding: 4px 0;\\n  width: auto;\\n  height: 50px;\\n  display: flex;\\n  align-items: center;\\n  transition: all 300ms ease-in;\\n\\n  &:hover {\\n    background-color: #32465a;\\n    padding-left: 16px;\\n    border-right: 0.6em solid white;\\n    color: white;\\n  }\\n\\n  & .friend-name {\\n    font-size: 1.8em;\\n    margin-left: 8px;\\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\\n  }\\n\\n  & .friend-actions {\\n    margin-left: auto;\\n    margin-right: 8px;\\n\\n    & > .chat {\\n      background-color: #FFA500;\\n    }\\n\\n    & > .unfriend {\\n      background-color: indianred;\\n    }\\n\\n    & > .friend-actions-btn {\\n      cursor: pointer;\\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\\n      margin: 0px 4px;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport { CHAT_SELECTED } from \"../../reducers/transitionReducer\";\nimport isMobile from \"../../utils/isMobile\";\nimport api from \"../../api\";\nimport OpenChatIcon from \"../icons/OpenChatIcon\";\nimport FriendRequestIcon from \"../icons/FriendRequestIcon\";\nimport { socketEmit } from \"../../socket\";\nvar FriendStyle = styled.li(_templateObject());\n\nvar Friend = function Friend(_ref) {\n  var friend = _ref.friend;\n\n  var _useAppHooks = useAppHooks(),\n      useAuth = _useAppHooks.useAuth,\n      useTransition = _useAppHooks.useTransition,\n      history = _useAppHooks.history,\n      socket = _useAppHooks.socket;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      dispatchAuth = _useAuth[1];\n\n  var _useTransition = _slicedToArray(useTransition, 2),\n      transition = _useTransition[0],\n      dispatchTransition = _useTransition[1];\n\n  var openChat =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var users, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              users = [friend.id, user.id];\n              _context.next = 4;\n              return api.chat.searchChatByUsers(friend.id, user.id);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.data) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 8;\n              return api.chat.createChat(users);\n\n            case 8:\n              res = _context.sent;\n\n            case 9:\n              if (isMobile) dispatchTransition({\n                type: CHAT_SELECTED,\n                payload: true\n              });\n              if (res.data && res.data.id) history.push(\"/chats/\".concat(res.data.id));\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n\n    return function openChat() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var unfriend = function unfriend() {\n    socketEmit('delete-friend', socket, {\n      contactId: friend.id,\n      userId: user.id\n    });\n  };\n\n  return React.createElement(FriendStyle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"friend-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, friend.name), React.createElement(\"span\", {\n    className: \"friend-actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(OpenChatIcon, {\n    className: \"friend-actions-btn chat\",\n    handleClick: openChat,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(FriendRequestIcon, {\n    className: \"friend-actions-btn unfriend\",\n    cancel: true,\n    handleClick: unfriend,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })));\n};\n\nexport default Friend;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/friends/Friend.jsx"],"names":["React","useEffect","styled","useAppHooks","CHAT_SELECTED","isMobile","api","OpenChatIcon","FriendRequestIcon","socketEmit","FriendStyle","li","Friend","friend","useAuth","useTransition","history","socket","user","dispatchAuth","transition","dispatchTransition","openChat","users","id","chat","searchChatByUsers","res","data","createChat","type","payload","push","console","log","unfriend","contactId","userId","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport { CHAT_SELECTED } from \"../../reducers/transitionReducer\";\nimport isMobile from \"../../utils/isMobile\";\nimport api from \"../../api\";\nimport OpenChatIcon from \"../icons/OpenChatIcon\";\nimport FriendRequestIcon from \"../icons/FriendRequestIcon\";\nimport { socketEmit } from \"../../socket\";\n\nconst FriendStyle = styled.li`\n  margin: 0;\n  padding: 4px 0;\n  width: auto;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  transition: all 300ms ease-in;\n\n  &:hover {\n    background-color: #32465a;\n    padding-left: 16px;\n    border-right: 0.6em solid white;\n    color: white;\n  }\n\n  & .friend-name {\n    font-size: 1.8em;\n    margin-left: 8px;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\n  }\n\n  & .friend-actions {\n    margin-left: auto;\n    margin-right: 8px;\n\n    & > .chat {\n      background-color: #FFA500;\n    }\n\n    & > .unfriend {\n      background-color: indianred;\n    }\n\n    & > .friend-actions-btn {\n      cursor: pointer;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, .6);\n      margin: 0px 4px;\n    }\n  }\n`;\n\nconst Friend = ({ friend }) => {\n  const { useAuth, useTransition, history, socket } = useAppHooks();\n  const [{ user }, dispatchAuth] = useAuth;\n  const [transition, dispatchTransition] = useTransition;\n\n  const openChat = async () => {\n    try {      \n      let users = [friend.id, user.id];\n      let res = await api.chat.searchChatByUsers(friend.id, user.id);\n      if (!res.data) {\n        res = await api.chat.createChat(users)\n      }\n      if (isMobile) dispatchTransition({ type: CHAT_SELECTED, payload: true });\n      if (res.data && res.data.id) history.push(`/chats/${res.data.id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const unfriend = () => {\n    socketEmit('delete-friend', socket, {contactId: friend.id, userId: user.id})\n  }\n\n  return <FriendStyle>\n    <span className=\"friend-name\">{friend.name}</span>\n    <span className=\"friend-actions\">\n      <OpenChatIcon className='friend-actions-btn chat' handleClick={openChat} />\n      <FriendRequestIcon\n        className='friend-actions-btn unfriend'\n        cancel={true}\n        handleClick={unfriend}\n      />\n    </span>\n  </FriendStyle>;\n};\n\nexport default Friend;\n"]},"metadata":{},"sourceType":"module"}