{"ast":null,"code":"import _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/friends/NotFriend.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    text-align: center;\\n    background-color: transparent;\\n    color: black;\\n    position: absolute;\\n    padding: 5px 0px;\\n    width: 100%;\\n    height: auto;\\n    bottom: 80px;\\n    left: 50%;\\n    transform: translate3d(-50%, 0, 0);\\n\\n    & .blocked-request {\\n        margin-left: 10px;\\n        text-transform: uppercase;\\n        // border-radius: 4px;\\n        box-shadow: 2px 2px 4px rgba(0, 0, 0, .4);\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState } from 'react';\nimport { Button } from 'semantic-ui-react';\nimport styled from 'styled-components';\nimport { useAppHooks } from '../../contexts';\nimport api from '../../api';\nvar NotFriendStyle = styled.div(_templateObject());\n\nvar NotFriend = function NotFriend(_ref) {\n  var contact = _ref.contact;\n\n  var _useAppHooks = useAppHooks(),\n      useAuth = _useAppHooks.useAuth,\n      socket = _useAppHooks.socket;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      _ = _useAuth[1];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFriend = _useState2[0],\n      setIsFriend = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isRequest = _useState4[0],\n      setIsRequest = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasBlocked = _useState6[0],\n      setHasBlock = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isBlocked = _useState8[0],\n      setIsBlock = _useState8[1];\n\n  var unblockContact = function unblockContact() {\n    alert('contact blocked');\n    socket.emit('check-is-blocked', contact);\n    socket.emit('check-has-blocked', contact);\n  };\n\n  var blockContact = function blockContact() {\n    alert('contact blocked');\n    socket.emit('check-is-blocked', contact);\n    socket.emit('check-has-blocked', contact);\n  };\n\n  var acceptContact = function acceptContact() {\n    alert('friend\\'s request accepted');\n    socket.emit('check-friend', contact);\n    socket.emit('check-request', contact);\n  };\n\n  socket.on('check-friend-response', function (_ref2) {\n    var friend = _ref2.friend;\n\n    if (friend.id === contact.id) {\n      setIsFriend(friend.status);\n    }\n  });\n  socket.on('check-request-response', function (_ref3) {\n    var request = _ref3.request;\n\n    if (request.id === contact.id) {\n      setIsRequest(true);\n    }\n  });\n  socket.on('check-is-blocked-response', function (_ref4) {\n    var isBlocked = _ref4.isBlocked;\n\n    if (isBlocked.id === user.id) {\n      setIsBlock(true);\n    }\n  });\n  socket.on('check-has-blocked-response', function (_ref5) {\n    var hasBlocked = _ref5.hasBlocked;\n\n    if (hasBlocked.id === contact.id) {\n      setHasBlock(true);\n    }\n  });\n  useEffect(function () {\n    socket.emit('check-friend', contact);\n    socket.emit('check-request', contact);\n    socket.emit('check-is-blocked', contact);\n    socket.emit('check-has-blocked', contact);\n    /* const checkFriend = async () => {\n        const res = await api.user.getFriendList(user.id)\n        const friends = res.data\n        if (friends.length > 0) {\n            let match = friends.find(friend => friend.id === contact.id)\n            if (match) {\n                setIsFriend(match)\n            }\n            else {\n                setIsFriend(null)\n            }\n        }\n    }\n     checkFriend() */\n  }, []);\n  return React.createElement(NotFriendStyle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, !isFriend && !isRequest && !hasBlocked && !isBlocked && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"This contact is not among your friends. Do you want to block him?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Yes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })), !isFriend && isRequest && !hasBlocked && !isBlocked && isRequest.id === contact.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"This contact sent you a friend's request. What do you want to do?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: acceptContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Accept\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"or\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Or\"), React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Block\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), !isFriend && !isRequest && hasBlocked && isBlocked && hasBlocked.id === contact.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"This contact has been blocked. You Do you want to unblock him?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Yes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), !isFriend && !isRequest && hasBlocked && isBlocked && isBlocked.id === user.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"You can no longer send message in this chat!\"));\n};\n\nexport default NotFriend;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/friends/NotFriend.jsx"],"names":["React","useEffect","useState","Button","styled","useAppHooks","api","NotFriendStyle","div","NotFriend","contact","useAuth","socket","user","_","isFriend","setIsFriend","isRequest","setIsRequest","hasBlocked","setHasBlock","isBlocked","setIsBlock","unblockContact","alert","emit","blockContact","acceptContact","on","friend","id","status","request"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Button } from 'semantic-ui-react'\nimport styled from 'styled-components'\nimport { useAppHooks } from '../../contexts';\nimport api from '../../api';\n\nconst NotFriendStyle = styled.div`\n    text-align: center;\n    background-color: transparent;\n    color: black;\n    position: absolute;\n    padding: 5px 0px;\n    width: 100%;\n    height: auto;\n    bottom: 80px;\n    left: 50%;\n    transform: translate3d(-50%, 0, 0);\n\n    & .blocked-request {\n        margin-left: 10px;\n        text-transform: uppercase;\n        // border-radius: 4px;\n        box-shadow: 2px 2px 4px rgba(0, 0, 0, .4);\n    }\n`\n\nconst NotFriend = ({ contact }) => {\n    const { useAuth, socket } = useAppHooks()\n    const [{user}, _] = useAuth\n\n    const [isFriend, setIsFriend] = useState(null)\n    const [isRequest, setIsRequest] = useState(null)\n    const [hasBlocked, setHasBlock] = useState(null)\n    const [isBlocked, setIsBlock] = useState(null)\n\n    const unblockContact = () => {\n        alert('contact blocked')\n        socket.emit('check-is-blocked', contact)\n        socket.emit('check-has-blocked', contact)\n    }\n\n    const blockContact = () => {\n        alert('contact blocked')\n        socket.emit('check-is-blocked', contact)\n        socket.emit('check-has-blocked', contact)\n    }\n    \n    const acceptContact = () => {\n        alert('friend\\'s request accepted')\n        socket.emit('check-friend', contact)\n        socket.emit('check-request', contact)\n    }\n\n    socket.on('check-friend-response', ({friend}) => {\n        if (friend.id === contact.id) {\n            setIsFriend(friend.status)\n        }\n    })\n    socket.on('check-request-response', ({request}) => {\n        if (request.id === contact.id) {\n            setIsRequest(true)\n        }\n    })\n    socket.on('check-is-blocked-response', ({isBlocked}) => {\n        if (isBlocked.id === user.id) {\n            setIsBlock(true)\n        }\n    })\n    socket.on('check-has-blocked-response', ({hasBlocked}) => {\n        if (hasBlocked.id === contact.id) {\n            setHasBlock(true)\n        }\n    })\n\n    useEffect(() => {\n        socket.emit('check-friend', contact)\n        socket.emit('check-request', contact)\n        socket.emit('check-is-blocked', contact)\n        socket.emit('check-has-blocked', contact)\n        /* const checkFriend = async () => {\n            const res = await api.user.getFriendList(user.id)\n            const friends = res.data\n            if (friends.length > 0) {\n                let match = friends.find(friend => friend.id === contact.id)\n                if (match) {\n                    setIsFriend(match)\n                }\n                else {\n                    setIsFriend(null)\n                }\n            }\n        }\n\n        checkFriend() */\n    }, [])\n\n    return (\n        <NotFriendStyle>\n            {\n                !isFriend && !isRequest && !hasBlocked && !isBlocked &&\n                <span className='not-friend'>\n                    This contact is not among your friends. Do you want to block him?\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Yes</b>} />\n                </span>\n            }\n            {\n                !isFriend && isRequest && !hasBlocked && !isBlocked && isRequest.id === contact.id &&\n                <span className='not-friend'>\n                    This contact sent you a friend's request. What do you want to do?\n                    <Button className='blocked-request' onClick={acceptContact} content={<b>Accept</b>} />\n                    <span className='or'>Or</span>\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Block</b>} />\n                </span>\n            }\n            {\n                !isFriend && !isRequest && hasBlocked && isBlocked && hasBlocked.id === contact.id &&\n                <span className='not-friend'>\n                    This contact has been blocked. You Do you want to unblock him?\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Yes</b>} />\n                </span>\n            }\n            {\n                !isFriend && !isRequest && hasBlocked && isBlocked && isBlocked.id === user.id &&\n                <span className='not-friend'>\n                    You can no longer send message in this chat!\n                </span>\n            }\n        </NotFriendStyle>\n    )\n}\n\nexport default NotFriend\n"]},"metadata":{},"sourceType":"module"}