{"ast":null,"code":"import _regeneratorRuntime from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/users/User.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  padding: 4px 0;\\n  cursor: pointer;\\n  width: auto;\\n  height: 40px;\\n  color: black;\\n  display: flex;\\n  align-items: center;\\n  transition: all 300ms ease-in;\\n\\n  &:hover {\\n    background-color: #32465a;\\n    padding-left: 16px;\\n    border-right: 0.6em solid white;\\n    color: white;\\n  }\\n\\n  & .contact-name {\\n    font-size: 1.5em;\\n    letter-spacing: 4px;\\n  }\\n\\n  & .contact-actions {\\n    margin-left: auto;\\n    margin-right: 8px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport { CHAT_SELECTED } from \"../../reducers/transitionReducer\";\nimport isMobile from \"../../utils/isMobile\";\nimport api, { baseUrl } from \"../../api\";\nimport OpenChatIcon from \"../icons/OpenChatIcon\";\nimport FriendRequestIcon from \"../icons/FriendRequestIcon\";\nimport { CLOSE_MODAL } from \"../../reducers/modalReducer\";\nvar UserStyle = styled.li(_templateObject());\n\nvar User = function User(_ref) {\n  var contact = _ref.contact;\n\n  var _useAppHooks = useAppHooks(),\n      useAuth = _useAppHooks.useAuth,\n      useTransition = _useAppHooks.useTransition,\n      useModal = _useAppHooks.useModal,\n      history = _useAppHooks.history,\n      socket = _useAppHooks.socket;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      dispatchAuth = _useAuth[1];\n\n  var _useTransition = _slicedToArray(useTransition, 2),\n      transition = _useTransition[0],\n      dispatchTransition = _useTransition[1];\n\n  var _useModal = _slicedToArray(useModal, 2),\n      modal = _useModal[0],\n      dispatchModal = _useModal[1];\n\n  var closeModal = function closeModal() {\n    return dispatchModal({\n      type: CLOSE_MODAL\n    });\n  };\n\n  var openChat =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res, chat;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              console.log(contact);\n              console.log(user);\n              _context.next = 5;\n              return api.chat.createChat([contact, user]);\n\n            case 5:\n              res = _context.sent;\n              chat = res.data;\n              _context.t0 = console;\n              _context.next = 10;\n              return chat.getUser();\n\n            case 10:\n              _context.t1 = _context.sent;\n\n              _context.t0.log.call(_context.t0, _context.t1);\n\n              // let users = [contact, user];\n              // let res = await api.chat.createChat(users);\n              // console.log(res.data);\n              // let chatRequest = res.data;\n              // if (chatRequest) {\n              // console.log(chatRequest);\n              // history.push(`/chats/${chatRequest.id}`);\n              // } else {\n              // let res = await api.chat.createChat(users);\n              // let chat = res.data;\n              // if (chat) {\n              //   history.push(`/chats/${chat.id}`);\n              // }\n              // }\n              closeModal();\n              if (isMobile) dispatchTransition({\n                type: CHAT_SELECTED,\n                payload: true\n              });\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t2 = _context[\"catch\"](0);\n              throw _context.t2;\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 16]]);\n    }));\n\n    return function openChat() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var sendFriendRequest =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              alert(\"Friend Request\"); // socket.emit(\"new-chat\", users);\n              // try {\n              //   let users = [contact.name, user.name];\n              //   let res = await api.chat.searchChatByUsers(users);\n              //   let chatRequest = res.data;\n              //   if (chatRequest) {\n              //     history.push(`/chats/${chatRequest.id}`);\n              //   } else {\n              //     let res = await api.chat.createChat(users);\n              //     let chat = res.data;\n              //     if (chat) {\n              //       history.push(`/chats/${chat.id}`);\n              //     }\n              //   }\n              //   closeModal();\n              // if (isMobile) dispatchTransition({ type: CHAT_SELECTED, payload: true });\n              // } catch (error) {\n              //   throw error;\n              // }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function sendFriendRequest() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(UserStyle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"contact-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, contact.name), React.createElement(\"span\", {\n    className: \"contact-actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(OpenChatIcon, {\n    handleClick: openChat,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), React.createElement(FriendRequestIcon, {\n    handleClick: sendFriendRequest,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })));\n};\n\nexport default User;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/users/User.jsx"],"names":["React","useEffect","styled","useAppHooks","CHAT_SELECTED","isMobile","api","baseUrl","OpenChatIcon","FriendRequestIcon","CLOSE_MODAL","UserStyle","li","User","contact","useAuth","useTransition","useModal","history","socket","user","dispatchAuth","transition","dispatchTransition","modal","dispatchModal","closeModal","type","openChat","console","log","chat","createChat","res","data","getUser","payload","sendFriendRequest","alert","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport { CHAT_SELECTED } from \"../../reducers/transitionReducer\";\nimport isMobile from \"../../utils/isMobile\";\nimport api, { baseUrl } from \"../../api\";\nimport OpenChatIcon from \"../icons/OpenChatIcon\";\nimport FriendRequestIcon from \"../icons/FriendRequestIcon\";\nimport { CLOSE_MODAL } from \"../../reducers/modalReducer\";\n\nconst UserStyle = styled.li`\n  margin: 0;\n  padding: 4px 0;\n  cursor: pointer;\n  width: auto;\n  height: 40px;\n  color: black;\n  display: flex;\n  align-items: center;\n  transition: all 300ms ease-in;\n\n  &:hover {\n    background-color: #32465a;\n    padding-left: 16px;\n    border-right: 0.6em solid white;\n    color: white;\n  }\n\n  & .contact-name {\n    font-size: 1.5em;\n    letter-spacing: 4px;\n  }\n\n  & .contact-actions {\n    margin-left: auto;\n    margin-right: 8px;\n  }\n`;\n\nconst User = ({ contact }) => {\n  const { useAuth, useTransition, useModal, history, socket } = useAppHooks();\n  const [{ user }, dispatchAuth] = useAuth;\n  const [transition, dispatchTransition] = useTransition;\n  const [modal, dispatchModal] = useModal;\n\n  const closeModal = () => dispatchModal({ type: CLOSE_MODAL });\n\n  const openChat = async () => {\n    // socket.emit(\"new-chat\", users);\n    try {\n      console.log(contact);\n      console.log(user);\n      const res = await api.chat.createChat([contact, user]);\n      let chat = res.data;\n      console.log(await chat.getUser());\n      // let users = [contact, user];\n      // let res = await api.chat.createChat(users);\n      // console.log(res.data);\n      // let chatRequest = res.data;\n      // if (chatRequest) {\n      // console.log(chatRequest);\n      // history.push(`/chats/${chatRequest.id}`);\n      // } else {\n      // let res = await api.chat.createChat(users);\n      // let chat = res.data;\n      // if (chat) {\n      //   history.push(`/chats/${chat.id}`);\n      // }\n      // }\n      closeModal();\n      if (isMobile) dispatchTransition({ type: CHAT_SELECTED, payload: true });\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const sendFriendRequest = async () => {\n    alert(\"Friend Request\");\n    // socket.emit(\"new-chat\", users);\n    // try {\n    //   let users = [contact.name, user.name];\n    //   let res = await api.chat.searchChatByUsers(users);\n    //   let chatRequest = res.data;\n    //   if (chatRequest) {\n    //     history.push(`/chats/${chatRequest.id}`);\n    //   } else {\n    //     let res = await api.chat.createChat(users);\n    //     let chat = res.data;\n    //     if (chat) {\n    //       history.push(`/chats/${chat.id}`);\n    //     }\n    //   }\n    //   closeModal();\n    // if (isMobile) dispatchTransition({ type: CHAT_SELECTED, payload: true });\n    // } catch (error) {\n    //   throw error;\n    // }\n  };\n\n  return (\n    <UserStyle>\n      <span className=\"contact-name\">{contact.name}</span>\n      <span className=\"contact-actions\">\n        <OpenChatIcon handleClick={openChat} />\n        <FriendRequestIcon handleClick={sendFriendRequest} />\n      </span>\n    </UserStyle>\n  );\n};\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}