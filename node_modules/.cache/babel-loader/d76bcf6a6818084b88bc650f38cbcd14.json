{"ast":null,"code":"import _regeneratorRuntime from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/friends/NotFriend.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    text-align: center;\\n    background-color: white;\\n    color: black;\\n    position: absolute;\\n    padding: 5px 0px;\\n    width: 100%;\\n    height: auto;\\n    bottom: 80px;\\n    left: 50%;\\n    transform: translate3d(-50%, 0, 0);\\n\\n    & .blocked-request {\\n        margin-left: 10px;\\n        text-transform: uppercase;\\n        // border-radius: 4px;\\n        box-shadow: 2px 2px 4px rgba(0, 0, 0, .4);\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState } from 'react';\nimport { Button } from 'semantic-ui-react';\nimport styled from 'styled-components';\nimport { useAppHooks } from '../../contexts';\nimport api from '../../api';\nvar NotFriendStyle = styled.div(_templateObject());\n\nvar NotFriend = function NotFriend(_ref) {\n  var contact = _ref.contact;\n\n  var _useAppHooks = useAppHooks(),\n      useAuth = _useAppHooks.useAuth;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      _ = _useAuth[1];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFriend = _useState2[0],\n      setIsFriend = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isRequest = _useState4[0],\n      setIsRequest = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasBlocked = _useState6[0],\n      setHasBlock = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isBlocked = _useState8[0],\n      setIsBlock = _useState8[1];\n\n  var blockContact = function blockContact() {\n    alert('contact blocked');\n  };\n\n  var acceptContact = function acceptContact() {\n    alert('friend\\'s request accepted');\n  };\n\n  useEffect(function () {\n    var checkFriend =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res, friends, match;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return api.user.getFriendList(user.id);\n\n              case 2:\n                res = _context.sent;\n                friends = res.data;\n\n                if (friends.length > 0) {\n                  match = friends.find(function (friend) {\n                    return friend.id === contact.id;\n                  });\n\n                  if (match) {\n                    setIsFriend(match);\n                  } else {\n                    setIsFriend(null);\n                  }\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function checkFriend() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    checkFriend();\n  }, [isFriend]);\n  console.log('not friend');\n  return React.createElement(NotFriendStyle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, !isFriend && !isRequest && !hasBlocked && !isBlocked && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"This contact is not among your friends. Do you want to block him?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Yes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), !isFriend && isRequest && !hasBlocked && !isBlocked && isRequest.id === contact.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"This contact sent you a friend's request. What do you want to do?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: acceptContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Accept\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"or\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Or\"), React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Block\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })), !isFriend && !isRequest && hasBlocked && isBlocked && hasBlocked.id === contact.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"This contact has been blocked. You Do you want to unblock him?\", React.createElement(Button, {\n    className: \"blocked-request\",\n    onClick: blockContact,\n    content: React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Yes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  })), !isFriend && !isRequest && hasBlocked && isBlocked && isBlocked.id === user.id && React.createElement(\"span\", {\n    className: \"not-friend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"You can no longer send message in this chat!\"));\n};\n\nexport default NotFriend;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/friends/NotFriend.jsx"],"names":["React","useEffect","useState","Button","styled","useAppHooks","api","NotFriendStyle","div","NotFriend","contact","useAuth","user","_","isFriend","setIsFriend","isRequest","setIsRequest","hasBlocked","setHasBlock","isBlocked","setIsBlock","blockContact","alert","acceptContact","checkFriend","getFriendList","id","res","friends","data","length","match","find","friend","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Button } from 'semantic-ui-react'\nimport styled from 'styled-components'\nimport { useAppHooks } from '../../contexts';\nimport api from '../../api';\n\nconst NotFriendStyle = styled.div`\n    text-align: center;\n    background-color: white;\n    color: black;\n    position: absolute;\n    padding: 5px 0px;\n    width: 100%;\n    height: auto;\n    bottom: 80px;\n    left: 50%;\n    transform: translate3d(-50%, 0, 0);\n\n    & .blocked-request {\n        margin-left: 10px;\n        text-transform: uppercase;\n        // border-radius: 4px;\n        box-shadow: 2px 2px 4px rgba(0, 0, 0, .4);\n    }\n`\n\nconst NotFriend = ({ contact }) => {\n    const { useAuth } = useAppHooks()\n    const [{user}, _] = useAuth\n\n    const [isFriend, setIsFriend] = useState(null)\n    const [isRequest, setIsRequest] = useState(null)\n    const [hasBlocked, setHasBlock] = useState(null)\n    const [isBlocked, setIsBlock] = useState(null)\n\n    const blockContact = () => {\n        alert('contact blocked')\n    }\n    \n    const acceptContact = () => {\n        alert('friend\\'s request accepted')\n    }\n\n    useEffect(() => {\n        const checkFriend = async () => {\n            const res = await api.user.getFriendList(user.id)\n            const friends = res.data\n            if (friends.length > 0) {\n                let match = friends.find(friend => friend.id === contact.id)\n                if (match) {\n                    setIsFriend(match)\n                }\n                else {\n                    setIsFriend(null)\n                }\n            }\n        }\n\n        checkFriend()\n    }, [isFriend])\n\n    console.log('not friend')\n\n    return (\n        <NotFriendStyle>\n            {\n                !isFriend && !isRequest && !hasBlocked && !isBlocked &&\n                <span className='not-friend'>\n                    This contact is not among your friends. Do you want to block him?\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Yes</b>} />\n                </span>\n            }\n            {\n                !isFriend && isRequest && !hasBlocked && !isBlocked && isRequest.id === contact.id &&\n                <span className='not-friend'>\n                    This contact sent you a friend's request. What do you want to do?\n                    <Button className='blocked-request' onClick={acceptContact} content={<b>Accept</b>} />\n                    <span className='or'>Or</span>\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Block</b>} />\n                </span>\n            }\n            {\n                !isFriend && !isRequest && hasBlocked && isBlocked && hasBlocked.id === contact.id &&\n                <span className='not-friend'>\n                    This contact has been blocked. You Do you want to unblock him?\n                    <Button className='blocked-request' onClick={blockContact} content={<b>Yes</b>} />\n                </span>\n            }\n            {\n                !isFriend && !isRequest && hasBlocked && isBlocked && isBlocked.id === user.id &&\n                <span className='not-friend'>\n                    You can no longer send message in this chat!\n                </span>\n            }\n        </NotFriendStyle>\n    )\n}\n\nexport default NotFriend\n"]},"metadata":{},"sourceType":"module"}