{"ast":null,"code":"import _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/forms/MessageForm.jsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 50px;\\n  width: 90%;\\n  margin: auto;\\n  padding: 2px;\\n  border-radius: 8px;\\n  cursor: pointer;\\n  box-shadow: 2px -2px 4px rgba(0, 0, 0, 0.3);\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  padding: 8px;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 80px;\\n  display: grid;\\n  grid-template-columns: 90% 10%;\\n  background-image: linear-gradient(231deg, rgba(233, 233, 233, 0.01) 0%, rgba(233, 233, 233, 0.01) 25%,rgba(10, 10, 10, 0.01) 25%, rgba(10, 10, 10, 0.01) 50%,rgba(237, 237, 237, 0.01) 50%, rgba(237, 237, 237, 0.01) 75%,rgba(200, 200, 200, 0.01) 75%, rgba(200, 200, 200, 0.01) 100%),linear-gradient(344deg, rgba(2, 2, 2, 0.03) 0%, rgba(2, 2, 2, 0.03) 20%,rgba(10, 10, 10, 0.03) 20%, rgba(10, 10, 10, 0.03) 40%,rgba(100, 100, 100, 0.03) 40%, rgba(100, 100, 100, 0.03) 60%,rgba(60, 60, 60, 0.03) 60%, rgba(60, 60, 60, 0.03) 80%,rgba(135, 135, 135, 0.03) 80%, rgba(135, 135, 135, 0.03) 100%),linear-gradient(148deg, rgba(150, 150, 150, 0.03) 0%, rgba(150, 150, 150, 0.03) 14.286%,rgba(15, 15, 15, 0.03) 14.286%, rgba(15, 15, 15, 0.03) 28.572%,rgba(74, 74, 74, 0.03) 28.572%, rgba(74, 74, 74, 0.03) 42.858%,rgba(175, 175, 175, 0.03) 42.858%, rgba(175, 175, 175, 0.03) 57.144%,rgba(16, 16, 16, 0.03) 57.144%, rgba(16, 16, 16, 0.03) 71.42999999999999%,rgba(83, 83, 83, 0.03) 71.43%, rgba(83, 83, 83, 0.03) 85.71600000000001%,rgba(249, 249, 249, 0.03) 85.716%, rgba(249, 249, 249, 0.03) 100.002%),linear-gradient(122deg, rgba(150, 150, 150, 0.01) 0%, rgba(150, 150, 150, 0.01) 20%,rgba(252, 252, 252, 0.01) 20%, rgba(252, 252, 252, 0.01) 40%,rgba(226, 226, 226, 0.01) 40%, rgba(226, 226, 226, 0.01) 60%,rgba(49, 49, 49, 0.01) 60%, rgba(49, 49, 49, 0.01) 80%,rgba(94, 94, 94, 0.01) 80%, rgba(94, 94, 94, 0.01) 100%),linear-gradient(295deg, rgba(207, 207, 207, 0.02) 0%, rgba(207, 207, 207, 0.02) 25%,rgba(47, 47, 47, 0.02) 25%, rgba(47, 47, 47, 0.02) 50%,rgba(142, 142, 142, 0.02) 50%, rgba(142, 142, 142, 0.02) 75%,rgba(76, 76, 76, 0.02) 75%, rgba(76, 76, 76, 0.02) 100%),linear-gradient(73deg, rgba(81, 81, 81, 0.03) 0%, rgba(81, 81, 81, 0.03) 12.5%,rgba(158, 158, 158, 0.03) 12.5%, rgba(158, 158, 158, 0.03) 25%,rgba(136, 136, 136, 0.03) 25%, rgba(136, 136, 136, 0.03) 37.5%,rgba(209, 209, 209, 0.03) 37.5%, rgba(209, 209, 209, 0.03) 50%,rgba(152, 152, 152, 0.03) 50%, rgba(152, 152, 152, 0.03) 62.5%,rgba(97, 97, 97, 0.03) 62.5%, rgba(97, 97, 97, 0.03) 75%,rgba(167, 167, 167, 0.03) 75%, rgba(167, 167, 167, 0.03) 87.5%,rgba(22, 22, 22, 0.03) 87.5%, rgba(22, 22, 22, 0.03) 100%),linear-gradient(90deg, hsl(137,0%,23%),hsl(137,0%,23%));\\n\\n  @media \", \" {\\n    width: 100%;\\n    grid-template-columns: 85% 15%;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport devices from \"../../utils/devices\";\nimport TextInput from \"../inputs/TextInput\";\nimport { socketEmit, socketOn } from \"../../socket\";\nimport chat from \"../../api/chat\";\nvar MessageFormStyle = styled.form(_templateObject(), devices.mobileL);\nvar MessageBtnStyle = styled.span(_templateObject2());\n\nvar MessageForm = function MessageForm(_ref) {\n  var chatId = _ref.chatId;\n\n  var _useAppHooks = useAppHooks(),\n      socket = _useAppHooks.socket,\n      useTransition = _useAppHooks.useTransition,\n      useAuth = _useAppHooks.useAuth;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      dispatchAuth = _useAuth[1];\n\n  var _useTransition = _slicedToArray(useTransition, 2),\n      chatSelected = _useTransition[0].chatSelected,\n      _ = _useTransition[1];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    socket.emit(\"new-message\", {\n      chatId: chatId,\n      authorId: user.id,\n      text: text\n    });\n    socket.emit(\"stop-typing\");\n    setText(null);\n  };\n\n  var handleKeyPress = function handleKeyPress(e) {\n    var timeout = null;\n\n    if (e.key !== \"\") {\n      socket.emit(\"typing\", {\n        id: user.id\n      });\n      if (timeout) clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(function () {\n      socket.emit(\"stop-typing\");\n    }, 1500);\n  };\n\n  var handleFocus = function handleFocus() {\n    socketEmit('message-read', socket, {\n      userId: user.id,\n      chatId: chatId\n    });\n  };\n\n  return React.createElement(MessageFormStyle, {\n    isSelected: chatSelected,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    value: text,\n    handleChange: setText,\n    handleKeyPress: handleKeyPress,\n    handleFocus: handleFocus,\n    placeholder: \"Type your message...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(MessageBtnStyle, {\n    as: \"button\",\n    type: \"submit\",\n    disabled: !text,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Send\"));\n};\n\nexport default MessageForm;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/forms/MessageForm.jsx"],"names":["React","useState","useEffect","styled","useAppHooks","devices","TextInput","socketEmit","socketOn","chat","MessageFormStyle","form","mobileL","MessageBtnStyle","span","MessageForm","chatId","socket","useTransition","useAuth","user","dispatchAuth","chatSelected","_","text","setText","handleSubmit","e","preventDefault","emit","authorId","id","handleKeyPress","timeout","key","clearTimeout","setTimeout","handleFocus","userId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useAppHooks } from \"../../contexts\";\r\nimport devices from \"../../utils/devices\";\r\nimport TextInput from \"../inputs/TextInput\";\r\nimport { socketEmit, socketOn } from \"../../socket\";\r\nimport chat from \"../../api/chat\";\r\n\r\nconst MessageFormStyle = styled.form`\r\n  position: absolute;\r\n  padding: 8px;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 80px;\r\n  display: grid;\r\n  grid-template-columns: 90% 10%;\r\n  background-image: linear-gradient(231deg, rgba(233, 233, 233, 0.01) 0%, rgba(233, 233, 233, 0.01) 25%,rgba(10, 10, 10, 0.01) 25%, rgba(10, 10, 10, 0.01) 50%,rgba(237, 237, 237, 0.01) 50%, rgba(237, 237, 237, 0.01) 75%,rgba(200, 200, 200, 0.01) 75%, rgba(200, 200, 200, 0.01) 100%),linear-gradient(344deg, rgba(2, 2, 2, 0.03) 0%, rgba(2, 2, 2, 0.03) 20%,rgba(10, 10, 10, 0.03) 20%, rgba(10, 10, 10, 0.03) 40%,rgba(100, 100, 100, 0.03) 40%, rgba(100, 100, 100, 0.03) 60%,rgba(60, 60, 60, 0.03) 60%, rgba(60, 60, 60, 0.03) 80%,rgba(135, 135, 135, 0.03) 80%, rgba(135, 135, 135, 0.03) 100%),linear-gradient(148deg, rgba(150, 150, 150, 0.03) 0%, rgba(150, 150, 150, 0.03) 14.286%,rgba(15, 15, 15, 0.03) 14.286%, rgba(15, 15, 15, 0.03) 28.572%,rgba(74, 74, 74, 0.03) 28.572%, rgba(74, 74, 74, 0.03) 42.858%,rgba(175, 175, 175, 0.03) 42.858%, rgba(175, 175, 175, 0.03) 57.144%,rgba(16, 16, 16, 0.03) 57.144%, rgba(16, 16, 16, 0.03) 71.42999999999999%,rgba(83, 83, 83, 0.03) 71.43%, rgba(83, 83, 83, 0.03) 85.71600000000001%,rgba(249, 249, 249, 0.03) 85.716%, rgba(249, 249, 249, 0.03) 100.002%),linear-gradient(122deg, rgba(150, 150, 150, 0.01) 0%, rgba(150, 150, 150, 0.01) 20%,rgba(252, 252, 252, 0.01) 20%, rgba(252, 252, 252, 0.01) 40%,rgba(226, 226, 226, 0.01) 40%, rgba(226, 226, 226, 0.01) 60%,rgba(49, 49, 49, 0.01) 60%, rgba(49, 49, 49, 0.01) 80%,rgba(94, 94, 94, 0.01) 80%, rgba(94, 94, 94, 0.01) 100%),linear-gradient(295deg, rgba(207, 207, 207, 0.02) 0%, rgba(207, 207, 207, 0.02) 25%,rgba(47, 47, 47, 0.02) 25%, rgba(47, 47, 47, 0.02) 50%,rgba(142, 142, 142, 0.02) 50%, rgba(142, 142, 142, 0.02) 75%,rgba(76, 76, 76, 0.02) 75%, rgba(76, 76, 76, 0.02) 100%),linear-gradient(73deg, rgba(81, 81, 81, 0.03) 0%, rgba(81, 81, 81, 0.03) 12.5%,rgba(158, 158, 158, 0.03) 12.5%, rgba(158, 158, 158, 0.03) 25%,rgba(136, 136, 136, 0.03) 25%, rgba(136, 136, 136, 0.03) 37.5%,rgba(209, 209, 209, 0.03) 37.5%, rgba(209, 209, 209, 0.03) 50%,rgba(152, 152, 152, 0.03) 50%, rgba(152, 152, 152, 0.03) 62.5%,rgba(97, 97, 97, 0.03) 62.5%, rgba(97, 97, 97, 0.03) 75%,rgba(167, 167, 167, 0.03) 75%, rgba(167, 167, 167, 0.03) 87.5%,rgba(22, 22, 22, 0.03) 87.5%, rgba(22, 22, 22, 0.03) 100%),linear-gradient(90deg, hsl(137,0%,23%),hsl(137,0%,23%));\r\n\r\n  @media ${devices.mobileL} {\r\n    width: 100%;\r\n    grid-template-columns: 85% 15%;\r\n  }\r\n`;\r\n\r\nconst MessageBtnStyle = styled.span`\r\n  height: 50px;\r\n  width: 90%;\r\n  margin: auto;\r\n  padding: 2px;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  box-shadow: 2px -2px 4px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst MessageForm = ({ chatId }) => {\r\n  const { socket, useTransition, useAuth } = useAppHooks();\r\n  const [{user}, dispatchAuth] = useAuth\r\n  const [{ chatSelected }, _] = useTransition;\r\n\r\n  const [text, setText] = useState(null);\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    socket.emit(\"new-message\", { chatId, authorId: user.id, text });\r\n    socket.emit(\"stop-typing\");\r\n    setText(null);\r\n  };\r\n\r\n  const handleKeyPress = e => {\r\n    let timeout = null;\r\n\r\n    if (e.key !== \"\") {\r\n      socket.emit(\"typing\", {id: user.id});\r\n      if (timeout) clearTimeout(timeout);\r\n    }\r\n    timeout = setTimeout(() => {\r\n      socket.emit(\"stop-typing\");\r\n    }, 1500);\r\n  };\r\n\r\n  const handleFocus = () => {\r\n    socketEmit('message-read', socket, {userId: user.id, chatId})\r\n  }\r\n\r\n  return (\r\n    <MessageFormStyle isSelected={chatSelected} onSubmit={handleSubmit}>\r\n      <TextInput\r\n        value={text}\r\n        handleChange={setText}\r\n        handleKeyPress={handleKeyPress}\r\n        handleFocus={handleFocus}\r\n        placeholder=\"Type your message...\"\r\n      />\r\n      <MessageBtnStyle as=\"button\" type=\"submit\" disabled={!text}>\r\n        Send\r\n      </MessageBtnStyle>\r\n    </MessageFormStyle>\r\n  );\r\n};\r\n\r\nexport default MessageForm;\r\n"]},"metadata":{},"sourceType":"module"}