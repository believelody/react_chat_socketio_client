{"ast":null,"code":"import _regeneratorRuntime from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/yamakasi/React/react_chat_socketio/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/yamakasi/React/react_chat_socketio/src/components/friends/Friends.jsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  list-style: none;\\n  margin: 0;\\n  padding: 0px;\\n\\n  & > .friend-label {\\n    width: 100%;\\n    height: 100%;\\n    text-shadow: 2px 2px 4px rgba(255, 255, 255, .6);\\n    padding: 12px 8px;\\n    text-align: left;\\n    font-size: 1.2em;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .8), -1px -1px 2px rgba(0, 0, 0, .8);\\n    background-color: white;\\n    border-radius: 2px;\\n  }\\n\\n  &::-webkit-scrollbar {\\n    width: 8px;\\n    background: #2c3e50;\\n  }\\n\\n  &::-webkit-scrollbar-thumb {\\n    background-color: #243140;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 0;\\n  margin: 0;\\n\\n  & h4 {\\n    margin-left: 15px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport Friend from \"./Friend\";\nimport api from \"../../api\";\nimport Requests from \"../request/Requests\";\nvar FriendsContainer = styled.div(_templateObject());\nvar FriendList = styled.ul(_templateObject2());\n\nvar Friends = function Friends() {\n  var _useAppHooks = useAppHooks(),\n      useAuth = _useAppHooks.useAuth,\n      socket = _useAppHooks.socket;\n\n  var _useAuth = _slicedToArray(useAuth, 2),\n      user = _useAuth[0].user,\n      _ = _useAuth[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      friends = _useState2[0],\n      setFriends = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  socket.on('new-friend-confirm', function (data) {\n    if (data.to.id === user.id) setFriends(data.to.friends);\n    if (data.from.id === user.id) setFriends(data.from.friends);\n  });\n  socket.on('delete-friend-confirm', function (data) {\n    if (data.to.id === user.id) setFriends(data.to.friends);\n    if (data.from.id === user.id) setFriends(data.from.friends);\n  });\n  useEffect(function () {\n    var getFriends =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!user) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return api.user.getFriendList(user.id);\n\n              case 3:\n                res = _context.sent;\n                setFriends(res.data.friends);\n\n              case 5:\n                setLoading(false);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getFriends() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    if (user) getFriends();\n  }, [user]);\n  console.log(friends);\n  return React.createElement(FriendsContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, !loading && friends.length === 0 && React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"You have no friends. Start search amazing people.\"), !loading && friends.length > 0 && React.createElement(FriendList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"request-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Your Friends: \", React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, friends.length > 0 ? friends.length : 0)), friends.map(function (friend) {\n    return React.createElement(Friend, {\n      key: friend.id,\n      friend: friend,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    });\n  })), React.createElement(Requests, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }));\n};\n\nexport default Friends;","map":{"version":3,"sources":["/home/yamakasi/React/react_chat_socketio/src/components/friends/Friends.jsx"],"names":["React","useState","useEffect","styled","useAppHooks","Friend","api","Requests","FriendsContainer","div","FriendList","ul","Friends","useAuth","socket","user","_","friends","setFriends","loading","setLoading","on","data","to","id","from","getFriends","getFriendList","res","console","log","length","map","friend"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppHooks } from \"../../contexts\";\nimport Friend from \"./Friend\";\nimport api from \"../../api\";\nimport Requests from \"../request/Requests\";\n\nconst FriendsContainer = styled.div`\n  padding: 0;\n  margin: 0;\n\n  & h4 {\n    margin-left: 15px;\n  }\n`;\n\nconst FriendList = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0px;\n\n  & > .friend-label {\n    width: 100%;\n    height: 100%;\n    text-shadow: 2px 2px 4px rgba(255, 255, 255, .6);\n    padding: 12px 8px;\n    text-align: left;\n    font-size: 1.2em;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .8), -1px -1px 2px rgba(0, 0, 0, .8);\n    background-color: white;\n    border-radius: 2px;\n  }\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #2c3e50;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: #243140;\n  }\n`;\n\nconst Friends = () => {\n  const { useAuth, socket } = useAppHooks();\n  const [{ user }, _] = useAuth;\n\n  const [friends, setFriends] = useState([]);\n  const [loading, setLoading] = useState(true)\n\n  socket.on('new-friend-confirm', data => {\n    if (data.to.id === user.id) setFriends(data.to.friends)\n    if (data.from.id === user.id) setFriends(data.from.friends)\n  })\n\n  socket.on('delete-friend-confirm', data => {\n    if (data.to.id === user.id) setFriends(data.to.friends)\n    if (data.from.id === user.id) setFriends(data.from.friends)\n  })\n\n  useEffect(() => {\n    const getFriends = async () => {\n      if (user) {\n        let res = await api.user.getFriendList(user.id)\n        setFriends(res.data.friends)\n      }\n      setLoading(false)\n    }\n\n    if (user) getFriends()\n  }, [user])\n\n  console.log(friends)\n\n  return (\n    <FriendsContainer>\n      {!loading && friends.length === 0 && <h4>You have no friends. Start search amazing people.</h4>}\n      {\n        !loading && friends.length > 0 &&\n        <FriendList>\n        <div className='request-label'>\n          Your Friends: <span>{friends.length > 0 ? friends.length : 0}</span>\n        </div>\n        {friends.map(friend => <Friend key={friend.id} friend={friend} />)}\n        </FriendList>\n      }\n      <Requests />\n    </FriendsContainer>\n  );\n};\n\nexport default Friends;\n"]},"metadata":{},"sourceType":"module"}